!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=a("./navbar/navbar.directive"),e=a("./sidebar/sidebar.directive"),f=a("./search/searchInput.directive"),g=a("./gmap/gmap.directive"),h=a("./signin/signin.directive"),i=a("./signup/signupForm.directive"),j=a("./postjob/postjobForm.directive"),k=a("./skills/mySkills.directive"),l=a("./jobs/jobWindow.directive"),m=a("./user.factory"),n=a("./jobs/joblist.factory"),o=a("./skills/mySkills.factory"),p=a("./postjob/job.factory"),q=a("./bids/bid.factory"),r=(a("./gmap/gmap.controller"),a("./postjob/postjob.service"),a("./messenger.service")),s=a("./skills/trendySkills.service"),t=a("./main.controller");window.init=function(){var a=angular.module("githired",["ngResource","ngAnimate","ui.bootstrap"]);a.factory("user_factory",["$resource","$rootScope","mySkills_factory","bid_factory",m]).factory("joblist_factory",["$resource",n]).factory("mySkills_factory",["$resource",o]).factory("job_factory",["$resource","$rootScope",p]).factory("bid_factory",["$resource",q]),a.service("messenger_service",["$rootScope","user_factory","joblist_factory","job_factory",r]).service("trendySkills_service",["$resource",s]),a.directive("ghNavbar",[d]).directive("ghSidebar",[e]).directive("ghGmap",["$compile","messenger_service",g]).directive("ghSearch",[f]).directive("ghSigninModal",[h]).directive("ghSignupForm",[i]).directive("ghPostJobForm",[j]).directive("ghMySkills",[k]).directive("ghJobWindow",[l]),a.controller("main_controller",["$scope","messenger_service",t]),angular.bootstrap(document,["githired"]),$(window).resize(function(){var a=$(window).height();$("#gmap").css("height",a)}).resize()}},{"./bids/bid.factory":2,"./gmap/gmap.controller":3,"./gmap/gmap.directive":4,"./jobs/jobWindow.directive":6,"./jobs/joblist.factory":7,"./main.controller":8,"./messenger.service":9,"./navbar/navbar.directive":11,"./postjob/job.factory":12,"./postjob/postjob.service":14,"./postjob/postjobForm.directive":15,"./search/searchInput.directive":16,"./sidebar/sidebar.directive":17,"./signin/signin.directive":19,"./signup/signupForm.directive":21,"./skills/mySkills.directive":22,"./skills/mySkills.factory":23,"./skills/trendySkills.service":24,"./user.factory":25}],2:[function(a,b,c){b.exports=function(a){var b=a("/api/user/:userId/bids/:bidId",{userId:"@userid",bidId:"@bidId"},{create:{method:"POST"}});return b}},{}],3:[function(a,b,c){b.exports=function(a,b){a.control={},a.jobs=b.joblist,b.gmap.control=a.control,a.requestPostJob=function(a){b.jobPostingForm.control.show(a)}}},{}],4:[function(a,b,c){b.exports=function(b,c){function d(a,d,f){var g="images/logo32.png";c.user&&a.userId==c.user.userId&&(g="images/logo32-green.png");var h=new google.maps.Marker({map:e,draggable:!1,icon:g,animation:google.maps.Animation.DROP,position:d});return h.addListener("click",function(){var c=b("<gh-job-window job-id='"+a.jobId+"'></gh-job-window>")(f),d=new google.maps.InfoWindow({content:c[0]});d.open(e,h)}),h}var e,f,g=a("./gmap.controller"),h={center:new google.maps.LatLng(37.335268,-121.881361),zoom:13},i=[],j=function(a){var b="",c="",d="",e="",f="",g="";return angular.forEach(a,function(a,h){"route"==a.types[0]&&(b=a.long_name),"locality"==a.types[0]&&(c=a.long_name),"country"==a.types[0]&&(d=a.long_name),"administrative_area_level_1"==a.types[0]&&(g=a.long_name),"postal_code"==a.types[0]&&(e=a.long_name),"street_number"==a.types[0]&&(f=a.long_name)}),{number:f,street:b,city:c,state:g,country:d,postal:e}};return{controller:["$scope","messenger_service",g],scope:{},link:function(a,b,c){e=new google.maps.Map(b[0],h),f=new google.maps.Geocoder,a.control={addJob:function(b){if(b.coordinates)var c=b.coordinates[0],e=b.coordinates[1],f={lat:c,lng:e};else if(b.jobAddress)var f=b.jobAddress.latLng;var g=d(b,f,a);i.push(g),setTimeout(function(){a.$apply()},200)}},google.maps.event.addListener(e,"click",function(b){f.geocode({latLng:b.latLng},function(c,d){var e="";d==google.maps.GeocoderStatus.OK&&c[0]&&(e={formattedAddress:c[0].formatted_address,latLng:b.latLng},angular.extend(e,j(c[0].address_components)),a.requestPostJob(e))})}),a.$watch("jobs",function(b,c){function e(b){f.geocode({address:b.location+""},function(c,e){if(e==google.maps.GeocoderStatus.OK){console.log(c),b.jobAddress=c[0].geometry.location;d(b,c[0].geometry.location,a)}else console.log("Geocode was not successful for the following reason: "+e)})}for(var g=0;g<b.length;g++)e(b[g])},!0)}}}},{"./gmap.controller":3}],5:[function(a,b,c){b.exports=function(a,b){a.jobs=b.joblist,a.user=b.user}},{}],6:[function(a,b,c){b.exports=function(){var b=a("./jobWindow.controller.js");return{templateUrl:"jobs/jobWindow.template.html",scope:{jobId:"="},link:function(a,b,c){angular.forEach(a.jobs,function(b,c){b.jobId==a.jobId&&(a.job=b)}),a.addBid=function(c){console.log("you clicked on the bid button");var d=b.find(".bidAmount").val()||c.setWage;a.user.createBid(c.jobId,d)},a.startEdit=function(a,b){console.log("you clicked on the edit button"),console.log(a),console.log(b)}},controller:["$scope","messenger_service",b]}}},{"./jobWindow.controller.js":5}],7:[function(a,b,c){b.exports=function(a){var b="api/jobs";return a(b)}},{}],8:[function(a,b,c){b.exports=function(a,b){if(console.log(b.joblist),sessionStorage.getItem("__githired.user.credentials__")){var c=sessionStorage.getItem("__githired.user.credentials__"),d=c.split(":")[0],e=c.split(":")[1];b.signin({email:d,password:e}).then(function(a){b.user.fetchSkills()},function(a){console.log("Failed to load user. Error: "+a)})}}},{}],9:[function(a,b,c){b.exports=function(a,b,c,d){var e={sidebar:{},navbar:{},signup:function(c){var d=this;return d.user=b.signup(c),d.user.$promise.then(function(a){d.setSession(c)},function(b){a.$broadcast("error",b)}),d.user.$promise},signin:function(c){var d=this;return d.user=b.signin({},c),d.user.$promise.then(function(b){b.userId&&(a.$broadcast("user.signin.success"),d.setSession(c))},function(b){a.$broadcast("error",b)}),d.user.$promise},signout:function(){sessionStorage.removeItem("__githired.user.credentials__"),window.location.reload()},jobPostingForm:{},jobs:[],joblist:[],user:null,gmap:{},mySkillsModal:{},setSession:function(a){strCredentials=a.email+":"+a.password,sessionStorage.setItem("__githired.user.credentials__",strCredentials)},addJob:function(b){var c=this;return c.job=d.createJob({userId:this.user.userId},b),c.job.$promise.then(function(a){},function(b){a.$broadcast("error",b)}),c.job.$promise},fetchJobs:function(){var a=this;c.query({},function(b){console.log("i'm in success"),console.log("Response:"+b),angular.copy(b,a.joblist)},function(a){console.log("Failure:"+a)})}};return e.fetchJobs(),e}},{}],10:[function(a,b,c){b.exports=function(a,b){a.user=b.user,a.$on("user.signin.success",function(c,d){a.user=b.user}),$(document).on("dblclick",function(){console.log(a.user)}),a.vEllipsisToggle=function(){b.sidebar.control.show()},a.onSignupClicked=function(){b.signup.control.show()},a.onSigninClicked=function(){b.signin.control.show()},a.onSignoutClicked=function(){b.signout()},a.openMySkillsModal=function(){b.mySkillsModal.control.show()},a.onSidebarToggleClicked=function(){a.vEllipsis=!a.vEllipsis,a.vEllipsis?b.sidebar.control.show():b.sidebar.control.hide()},a.updateUser=function(){a.user.loading=!0,a.user.$save({userId:a.user.userId}).then(function(b){a.user.loading=!1,a.editLinkedIn=!1,a.reloadLinkedInScript()},function(b){a.user.loading=!1})}}},{}],11:[function(a,b,c){b.exports=function(){var b=a("./navbar.controller");return{templateUrl:"navbar/navbar.template.html",link:function(a,b,c){b.find(".menuLinkedInItem").on("click",function(a){a.preventDefault(),a.stopPropagation()}),a.reloadLinkedInScript=function(){var a=b.find(".linkedinScript").attr("src");b.find(".linkedinWidgetBlock").find(":not(.profileScript)").remove(),b.find(".linkedinWidgetBlock").append('<script class="linkedinScript" src="'+a+'"></script>')}},controller:["$scope","messenger_service",b]}}},{"./navbar.controller":10}],12:[function(a,b,c){b.exports=function(a,b){var c=a("/api/jobs/:request",{request:"@createJob"},{createJob:{method:"POST",params:{request:"createJob"}}});return c}},{}],13:[function(a,b,c){b.exports=function(a,b,c){a.control={},b.jobPostingForm.control=a.control,a.model={},a.submitPostJob=function(){b.addJob(a.model).then(function(){a.control.hide()})},a.selected=null,a.selectSkill=function(b,c,d,e){a.selected="",a.model.skills.push({name:c})},a.removeSkill=function(b){a.model.skills.splice(b,1)},a.getSkillSuggestions=function(a){var b=c.getSkills({like:a});return b.$promise.then(function(a){return a.success?a.keywords:[]},function(a){console.log(a)})}}},{}],14:[function(a,b,c){b.exports=function(a,b){var c=a("/api/postjob/",{},{postjob:{method:"POST"}});return c}},{}],15:[function(a,b,c){b.exports=function(){var b=a("./postjob.controller");return{templateUrl:"postjob/postjob.form.html",control:"=",link:function(a,b,c){var d=b.find(".modal");a.control.show=function(b){a.model={jobTitle:"",jobDescription:"",jobAddress:b,jobWageType:null,jobMinWage:"",jobMaxWage:"",jobSetWage:"",skills:[]},setTimeout(function(){a.$apply()},200),d.modal("show")},a.control.hide=function(){d.modal("hide"),a.model=null},d.on("hidden.bs.modal",function(){a.model=null})},controller:["$scope","messenger_service","trendySkills_service",b]}}},{"./postjob.controller":13}],16:[function(a,b,c){b.exports=function(){return{templateUrl:"search/searchBar.template.html",link:function(a,b,c){b.find("form").on("submit",function(b){a.sendQuery(a.searchInput)})},controller:["$scope",function(a){a.waiting=!1,a.searchLog={},a.clear=function(){a.searchLog={},a.$emit("searchInput.cleared"),a.searchInput="",setTimeout(function(){a.$apply()},10)},a.sendQuery=function(a){}}]}}},{}],17:[function(a,b,c){b.exports=function(){var a=function(a,b){a.control={},b.sidebar.control=a.control};return{templateUrl:"sidebar/sidebar.template.html",scope:{},link:function(a,b,c){a.control.show=function(){b.toggleClass("toggled",!0)},a.control.hide=function(){b.toggleClass("toggled",!1)}},controller:["$scope","messenger_service",a]}}},{}],18:[function(a,b,c){b.exports=function(a,b){a.control={},b.signin.control=a.control,a.form={email:null,password:null},a.status="standby",a.submit=function(){a.status="waiting",a.error="",b.signin(a.form).then(function(b){a.status="success",a.form.email=null,a.form.password=null,setTimeout(function(){a.control.hide(),a.status="standby",window.location.reload()},1e3)},function(b){a.error=b.data,a.status="standby"})}}},{}],19:[function(a,b,c){b.exports=function(){var b=a("./signin.controller");return{templateUrl:"signin/signin.modal.html",scope:{},link:function(a,b,c){var d=b.find(".modal");a.control.show=function(){d.modal("show")},a.control.hide=function(){d.modal("hide")}},controller:["$scope","messenger_service",b]}}},{"./signin.controller":18}],20:[function(a,b,c){b.exports=function(a,b){a.control={},b.signup.control=a.control,a.formError="",a.error="",a.status="standby",a.model={};var c=function(){return a.model.password!==a.model.confPassword?(a.formError="password",!1):a.model.isEmployer||a.model.isEmployee?!0:(a.formError="employment",!1)};a.submit=function(){return a.error="",a.formError="",a.status="waiting",c()?(a.model.company=a.model.isEmployer?a.model.company:"",a.model.firstName=a.model.isEmployee?a.model.firstName:"",a.model.lastName=a.model.isEmployee?a.model.lastName:"",void b.signup(a.model).then(function(b){b.userId>0?(a.status="success",setTimeout(function(){a.control.hide()},1500)):(a.error=b,a.status="standby")},function(b){a.error=b,a.status="standby"})):!1}}},{}],21:[function(a,b,c){b.exports=function(){var b=a("./signup.controller");return{templateUrl:"signup/signup.form.html",scope:{},link:function(a,b,c){var d=b.find(".modal");a.control.show=function(){d.modal("show")},a.control.hide=function(){d.modal("hide")}},controller:["$scope","messenger_service",b]}}},{"./signup.controller":20}],22:[function(a,b,c){b.exports=function(){var a=function(a,b,c){a.control={},a.waiting=!1,a.user=b.user,a.status="",a.user&&(a.skills=a.user.skills),b.mySkillsModal.control=a.control,a.selected=null,a.selectSkill=function(b,c,d,e){a.selected="",a.user.skills.push({name:c,userSkills:{userId:a.user.userId,yearsOfExperience:0}})},a.removeSkill=function(b){a.user.skills[b].skillId?a.user.skills[b]["delete"]=!0:a.user.skills.splice(b,1)},a.getSkillSuggestions=function(a){var b=c.getSkills({like:a});return b.$promise.then(function(a){return a.success?a.keywords:[]},function(a){console.log(a)})},a.save=function(){a.waiting=!0,a.user.saveSkills().then(function(b){console.log("Saved skills successfully"),a.waiting=!1,a.status="saved",setTimeout(function(){a.status="",a.$apply()},3e3)},function(a){console.log(a)})}};return{templateUrl:"skills/mySkills.template.html",scope:{},link:function(a,b,c){var d=b.find(".modal");a.control.show=function(){d.modal("show")},a.control.hide=function(){d.modal("hide")}},controller:["$scope","messenger_service","trendySkills_service",a]}}},{}],23:[function(a,b,c){b.exports=function(a){var b="/api/user/:userId/skills",c=a(b,{userId:"@id"});return c}},{}],24:[function(a,b,c){b.exports=function(a){var b="http://trendyskills.com/service",c=a(b,{callback:"JSON_CALLBACK",q:"keywords",like:"@query",key:"FjlgMNTrEU2eTRgi"},{getSkills:{method:"JSONP",isArray:!1}});return c}},{}],25:[function(a,b,c){b.exports=function(a,b,c,d){var e=a("/api/user/:userId/:request",{userId:"@id",request:"@signinORsignoutORsignup"},{signup:{method:"POST",params:{request:"signup"}},signin:{method:"POST",params:{request:"signin"}},signout:{method:"POST",params:{request:"signout"}}});return e.prototype.saveSkills=function(){var a=this,b=c.save({userId:a.userId},a.skills);return b.$promise},e.prototype.fetchSkills=function(){var a=this;a.skills=c.query({userId:a.userId})},e.prototype.createBid=function(a,b){var c=this,e={userId:c.userId},f=d.create(e,{jobId:a,bidAmount:b});angular.isArray(c.bids)||(c.bids=[]),c.bids.push(f),console.log(f)},e}},{}]},{},[1]);